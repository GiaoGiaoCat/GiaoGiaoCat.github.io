---
layout: post
title:  "cursor 技巧和思路"
date:   2025-02-03 08:10:00

categories: tool
tags: ai
author: "Victor"
---

## 核心功能

### 被动预测 & tab 应用

1. 根据上文代码，推理补全后续代码，按 tab 就可以应用这些代码。
2. 光标在代码中，会自动预测需要修改的代码，按 tab 也可以应用这些修改。

### Chat & Composer

> 可以从侧边栏中直接把文件和文件夹拖入到对话窗口中。

1. Chat 的快捷键 `CMD + L`，也可以选中一部分代码之后再按 `CMD + L`，针对这段代码进行讨论，建议使用 openai 4o 或 4o-mini，擅长分析需求。
2. Composer 的快捷键 `CMD + I`，建议使用 claude-3.5-sonnet 模型，擅长具体的编程操作。
3. `@Files, @Folders, @Code` 是用来给本次对话关联上下文。
4. `@Docs` 可以关联第三方文档，形成基于项目的私有知识库，Cursor 会自动抓取文档中的内容并加入索引纳入上下文。比如：接口文档、需求文档、库函数的说明文档。
  * 注意在添加文档的时候，`https://docs.domain.com` 只索引一个页面，`https://docs.domain.com/` 会索引页面链接中的其它内容。
  * 在对话时，`@Docs` 选择三方文档，Cursor 可以根据文档生成对话的答案。
6. `@https://docs.domain.com/index.html` 可以使用临时链接，Cursor 在对话时会解析这个链接的内容。
7. `@Web` 让 Cursor 除上下文之外，还可通过网络搜索相关的问题答案。
8. `@Git` 让 Cursor 根据 git 的常见命令进行一些任务。比如：对比两次 commit 的区别。
9. `@Notepad` 可以保存笔记并关联文件，以便 Chat 和 Compose 使用。
  * 建议保存 AI 的对话历史记录，项目相关的一些上下文记录、临时的头脑风暴。
  * 如果 Composer 回答的问题有 Bug，可以将问题记录到 Notepad 中，在 Chat 引用这个 Notepad 进行询问。
10. `@Codebase` 采集上下文进行推理，排序后利用上下文并给出最好的答案。建议打开新项目时在设置的 Features 中点击 Codebase indexing 的 Resync Index 功能，重新采集上下文。


## 配置功能

1. `.gitignore` 和 `.cursorignore` 配置不纳入索引的文件，即 codebase 时候不会采集这些被忽略的文件。
  * 可以让 Composer 检索项目并帮助我们生成 `.cursorignore` 文件，不过通常来说有 `.gitignore` 已经足够了，但也有特例，比如： IPDB 这种需要被 git 索引但是不希望 Cursor 索引的数据库文件。
2. `.cursorrules` 作为一个上下文约束，可以配置全局规则。包括：角色能力、项目简介和目标、目录结构、UI框架、技术框架、代码规范（命名、组件、样式、国际化等等）


## 技巧和思路

最重要的是自己解决问题的思路，表达需求的能力和架构能力。

### 如何防止修改的代码破坏已有功能

1. 为了防止一次 Composer 返回的代码修改与预期不符，可以先点击 Save all，预览之后认可这次改动再点击 Accept all。
2. Composer 的历史对话，点击 Restore 可以将代码恢复到此版本。

### 如何避免 AI 胡乱发挥

> 让 AI 更理解我们的需求。

1. 在提问之后，先让 AI 复述我们的需求，以确认它真正的理解并能将需求拆解成任务。例如：xxxx。请复述我的需求并拆解成任务再进行具体的代码修改。
2. 明确改动覆盖范围，尽见让需求单一。需要给出具体影响的文件，甚至函数，告诉 AI 在这个范围内进行修改。也就是 `@Files, @Folders, @Code` 的作用。
3. 可以将自己的解决思路和代码示例参考一并发送给 AI，让它有倾向性的进行思考。

### 需求拆解

当有一个比较大的需求出现时，可以先用 Chat 模式或者单独的 Chatgpt 进行讨论，将需求拆解为更小的 Feature 并用 Notepad 记下来，按照需求步骤逐个投喂给 Composer。

### 合理利用 Chat 和 Composer

如上面所说，Chat 和 Composer 使用了不同的模型有不同的长处。不用反复在 Composer 中纠结一个问题去调整代码。可以把问题记录到 Notepad 中，然后去 Chat 以这个 Notepad 作为关联的上下文进行讨论。有了明确的方案之后，再回到 Composer 中进行下一步动作。

### 如何使用 Cursor 开发一个历史项目

1. 打开之后先建立 Codebase indexing  索引，然后让 Cursor 帮忙生成 `.cursorignore` 并根据实际需要优化这个文件。
2. 根据项目创建 `.cursorrules` 文件以便后续 Cursor 输出的内容与项目风格保持一致。
3. 来了需求之后，跟 Chat 沟通把需求理解透，然后生成 Notepad 再去 Composer 中 `@Notepad` 进行开发。
4. 如果是 Bug 修复也是优先与 Chat 沟通，投喂给它 Bug 的更新上下文信息，让它给出解决思路。或利用 `@Git` 检索到没有 Bug 的提交，让 Cursor 对比给出答案。同时在 Notepad 中详细的阐述 Bug 产生的原因和解决方案，再去 Composer 引入这条笔记进行代码修改。

### 用好 Notepad

大的需求和复杂的 Bug 都要转换成 Notepad 拆解成具体的任务之后，再投喂给 Composer 进行处理。避免反复在对话框中修改，而是利用一个 Markdown 格式的文件更清晰的描述需求。

注意 Notepad 是放在 Cursor 的缓存中，所以最好定期将其整理到单独的文件中并索引到 `@Docs`。这些沉淀下来的资料和文档，有助于后续理解项目的延进和解决类似的问题。

### Git

现在 Cursor 的 Git 功能可以根据历史的 commit message 帮我们生成符合规范的提交信息。

## 提示词

提示词的描述要准确和详实，给出的细节越精确越好，其实这也是开发人员（AI）对产品经理的合理要求。

* 给图片增加抖动效果。提示词包含：抖动本身的描述、抖动速度和抖动的循环次数。例如：点击图片会出现抖动动画。动画角度范围从 0 到 2 度，动画速度 300ms，每次点击只摆动一次。
* 点击放大的交互。提示词包含：点击图片放大到画面的具体位置、图片放大后其他区域的展示以及怎么退出图片放大的状态。例如：点击图片后会放大到画面中心，图片放大时其它区域是灰色透明蒙版，点击灰色透明蒙版区域即可缩小至原来的大小和区域。
* 点击翻转的交互。提示词包含：点击翻转的时机、点击翻转的角度、点击翻转后的图片背景、点击翻转后的图片尺寸。例如：当图片处于放大状态时，点击这张放大的卡片，会出现图片翻转 180‘ 的动效，翻转后的图片背景是随机的渐变色，翻转前后的图片尺寸保持一致。

## 链接

* [(31) 普通人也可以看的 AI 编程指南 | Cursor 教程｜Cursor 使用技巧和思路｜如何免费使用 Cursor｜AI 编程](https://www.youtube.com/watch?v=lypPoT8lZ2M&t=2318s)
* [Awesome .cursorrules Files](https://github.com/PatrickJS/awesome-cursorrules/tree/main)
